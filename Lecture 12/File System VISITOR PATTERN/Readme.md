# **Задача**

**Note 1:** Всички примери са псевдо код.

**Note 2:** Имплементирането на така зададената задача с Visitor е леко overengineering, но все пак е добър пример.

Имаме файлова система с файлове и директории.

- **Файлът** има име.
- **Директорията** има име и масив, в който може да има и директории и файлове.

Заради масива на директорията, ще ни трябва общ базов клас, за да можем да направим масив, в който едновременно може да има и директории, и файлове.

Засега псевдо кодът ни изглежда така:

```cpp
class FileSystemEntity {
	std::string name;
public:
	FileSystemEntity(std::string name) : name(name) {}
	const std::string& getName() const {
		return name;
	}
	virtual ~FileSystemEntity() = 0;
};
FileSystemEntity::~FileSystemEntity() {}

class File : public FileSystemEntity { };

class Directory : public FileSystemEntity {
public:
	FileSystemEntity** children;
	size_t size;
};
```
Имаме следната задача:
Искаме да имаме функционалност за принтиране на имената на файлове и директории. В случая с директория искаме да принтираме и имената на всички наследници навътре в директорията. Принтирането трябва да става на база случайно подаден елемент от цялата дървовидна йерархия на файловата система. Нека принтирането става с помощта на принтиращ обект посетител (който ако потрябва в бъдеще може да прави и повечко неща при посещение на файл :), а не с print функция във FileSystemEntity, която да бъде презаписвана в наследниците. Все пак в следната задача print функцията е ок решение.

Тоест, ако нашият принтиращ обект:

1.Получи файл - просто да му принтира името.
2.Получи директория - принтира името на директорията и след това трябва да принтира имената на наследниците си (ако в тях има директории, те трябва да изпълнят отново точка 2).
Нека ползваме следния пример за файлова система:
![image](https://github.com/user-attachments/assets/01899879-927d-4007-bee4-1a4888d9f712)

Ако някой ни подаде File 4, принтираме File 4.
Ако някой ни подаде Directory 1, принтираме Directory 1, Directory 3, File 4, Directory 4, File 5. Аналогично за останалите.
Т.е. нашият visitor ще изглежда по следния начин:

```cpp
class FileSystemEntityVisitor {
public:
	void visitFile(File* f) {
		std::cout << f->getName();
	}

	void visitDirectory(Directory* d) {
		std::cout << d->getName();
		// След това обхождаме наследниците и започваме да принтираме техните имена
		for (size_t i = 0; i < d->size; i++) {
			// Всеки наследник може да е директория или файл, затова предаваме посетителя на наследника
			d->children[i]->accept(this); 
		}
	}
};
